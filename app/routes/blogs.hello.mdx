---
title: jiti 原理学习
author: Madinah
description: jiti 是一个直接用来运行 TS 和 ESM 的 node 运行时，它的原理是通过 NodeJS 中的 commonJS 和 VM 模块提供的 runInThisContext 方法来实现的。
tags:
  - nodejs
time: 2024-04-20 16:49:00
image: https://images.maidang.link/blake-harbison-CDsrj_c0UP8-unsplash.jpg
category: blog
---

```ts twoslash
interface IdLabel {id: number, /* some fields */ }
interface NameLabel {name: string, /* other fields */ }
type NameOrId<T extends number | string> = T extends number ? IdLabel : NameLabel;
// This comment should not be included

// ---cut---
function createLabel<T extends number | string>(idOrName: T): NameOrId<T> {
  throw "unimplemented"
}

let a = createLabel("typescript");
```